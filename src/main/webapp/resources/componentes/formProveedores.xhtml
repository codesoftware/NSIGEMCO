<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui"
	xmlns:b="http://butterfaces.larmic.de/components" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:composite="http://java.sun.com/jsf/composite">


<composite:interface>
	<composite:attribute name="idDialog" />
	<composite:attribute name="widgetVar" />
	<composite:attribute name="update" />
</composite:interface>
<composite:implementation>
	<f:event listener="#{provedorBean.consultaProveedores}" type="preRenderView" />
	<p:dialog id="#{cc.attrs.idDialog}" widgetVar="#{cc.attrs.widgetVar}" closeOnEscape="true" closable="true" styleClass="modalResponsiveMedium" modal="true">
		<p:dataTable var="proveedor" widgetVar="wproveedor" id="tablaProveedores" value="#{provedorBean.listaProveedores}" paginator="true" rows="20" filteredValue="#{provedorBean.listaProveedoresFiltro}"
			emptyMessage="No existen proveedores parametrizados en el sistema">
			<f:facet name="header">
								CONSULTA GENERAL DE PROVEEDORES
							</f:facet>
			<p:column headerText="NIT" filterBy="#{proveedor.nit}" priority="1" filterMatchMode="contains">
				<h:outputText value="#{proveedor.nit}-#{proveedor.dverificacion}"></h:outputText>
			</p:column>
			<p:column headerText="NOMBRE" filterBy="#{proveedor.nombre}" priority="2" filterMatchMode="contains">
				<h:outputText value="#{proveedor.nombre}"></h:outputText>
			</p:column>
			<p:column headerText="CIUDAD" filterBy="#{proveedor.ciudad.nombre}" priority="3" filterMatchMode="contains">
				<h:outputText value="#{proveedor.ciudad.nombre}"></h:outputText>
			</p:column>
			<p:column headerText="DETALLE">
				<p:commandButton value="SELECCIONAR" icon="fa fa-plus" styleClass="GreenButton" action="#{provedorBean.consultaProveedor(proveedor)}" update="#{cc.attrs.update}"
					oncomplete="PF('#{cc.attrs.widgetVar}').hide()" />
			</p:column>
		</p:dataTable>
	</p:dialog>
</composite:implementation>

</html>